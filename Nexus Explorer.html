<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Explorer - Nexus æŒ–çŸ¿æ¸¸æˆ</title>
    <style>
        :root {
            --primary: #4e54c8;
            --secondary: #8f94fb;
            --dark: #1a1c2c;
            --light: #f0f0f0;
            --success: #41b883;
            --warning: #ffcc00;
            --danger: #ff5252;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--dark), #0f1120);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--primary);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
        }

        h1 {
            font-size: 2.8rem;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #8a8fb3;
            max-width: 600px;
            margin: 0 auto 20px;
        }

        .game-container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 25px;
            margin-bottom: 30px;
        }

        .dashboard {
            background: rgba(26, 28, 44, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(79, 85, 124, 0.3);
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .dashboard-title {
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dashboard-title i {
            color: var(--primary);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: rgba(35, 38, 58, 0.7);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            background: rgba(35, 38, 58, 0.9);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .stat-title {
            font-size: 0.9rem;
            color: #8a8fb3;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 5px 0;
        }

        .stat-unit {
            font-size: 0.9rem;
            color: #8a8fb3;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .action-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 10px;
            color: white;
            padding: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .action-btn i {
            font-size: 1.8rem;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(78, 84, 200, 0.4);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .upgrades {
            background: rgba(35, 38, 58, 0.7);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .upgrades-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .upgrade-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .upgrade-info {
            flex: 1;
        }

        .upgrade-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .upgrade-desc {
            font-size: 0.85rem;
            color: #8a8fb3;
        }

        .upgrade-cost {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
        }

        .upgrade-buy {
            background: var(--success);
            border: none;
            border-radius: 8px;
            color: white;
            padding: 8px 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upgrade-buy:disabled {
            background: #555;
            cursor: not-allowed;
        }

        .network-view {
            background: rgba(26, 28, 44, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(79, 85, 124, 0.3);
            display: flex;
            flex-direction: column;
        }

        .network-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .network-canvas {
            flex: 1;
            background: rgba(20, 22, 36, 0.6);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .node {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(78, 84, 200, 0.5);
            transition: all 0.5s ease;
        }

        .player-node {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            width: 60px;
            height: 60px;
            z-index: 10;
            box-shadow: 0 0 25px var(--primary);
        }

        .other-node {
            background: rgba(143, 148, 251, 0.3);
            border: 2px solid var(--secondary);
        }

        .connection {
            position: absolute;
            height: 2px;
            background: rgba(143, 148, 251, 0.3);
            transform-origin: 0 0;
        }

        .events-log {
            background: rgba(35, 38, 58, 0.7);
            border-radius: 12px;
            padding: 15px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }

        .event {
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.9rem;
        }

        .event.success {
            color: var(--success);
        }

        .event.warning {
            color: var(--warning);
        }

        .event.danger {
            color: var(--danger);
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .control-btn {
            background: rgba(35, 38, 58, 0.7);
            border: 1px solid rgba(79, 85, 124, 0.3);
            border-radius: 10px;
            color: white;
            padding: 12px 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: rgba(78, 84, 200, 0.3);
        }

        footer {
            text-align: center;
            padding: 30px 0 20px;
            color: #8a8fb3;
            font-size: 0.9rem;
        }

        .github-link {
            color: var(--secondary);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }

        .github-link:hover {
            text-decoration: underline;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 900px) {
            .game-container {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .actions-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .actions-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">DYmac</div>
                <h1>Nexus Explorer</h1>
            </div>
            <p class="subtitle">å»ºç«‹ä½ çš„åŒºå—é“¾èŠ‚ç‚¹ï¼Œç®¡ç†ç®—åŠ›èµ„æºï¼Œå‚ä¸æŒ–çŸ¿ä¸äº¤æ˜“ï¼Œæˆä¸ºå»ä¸­å¿ƒåŒ–ç½‘ç»œçš„é¢†å¯¼è€…ï¼</p>
        </header>

        <div class="game-container">
            <div class="dashboard">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">
                        <i>ğŸ“Š</i> èŠ‚ç‚¹æ§åˆ¶é¢æ¿
                    </h2>
                    <div class="level">ç­‰çº§: <span id="level">1</span></div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">NEXUSä»£å¸ (NEX)</div>
                            <div class="stat-icon">ğŸ’°</div>
                        </div>
                        <div class="stat-value" id="nexus-tokens">100.00</div>
                        <div class="stat-unit">NEX</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">ç®—åŠ›</div>
                            <div class="stat-icon">âš¡</div>
                        </div>
                        <div class="stat-value" id="hashrate">5.2</div>
                        <div class="stat-unit">GH/s</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">èƒ½æºæ¶ˆè€—</div>
                            <div class="stat-icon">ğŸ”‹</div>
                        </div>
                        <div class="stat-value" id="energy-usage">120</div>
                        <div class="stat-unit">KW/h</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">èŠ‚ç‚¹å¯é æ€§</div>
                            <div class="stat-icon">ğŸ›¡ï¸</div>
                        </div>
                        <div class="stat-value" id="reliability">87%</div>
                        <div class="stat-progress">
                            <div class="progress-bar" style="width: 87%; background: var(--success); height: 6px; border-radius: 3px; margin-top: 8px;"></div>
                        </div>
                    </div>
                </div>

                <h3>èŠ‚ç‚¹æ“ä½œ</h3>
                <div class="actions-grid">
                    <button class="action-btn" id="mine-btn">
                        <i>â›ï¸</i>
                        <span>æŒ–çŸ¿</span>
                    </button>
                    <button class="action-btn" id="validate-btn">
                        <i>âœ…</i>
                        <span>éªŒè¯äº¤æ˜“</span>
                    </button>
                    <button class="action-btn" id="upgrade-btn">
                        <i>â¬†ï¸</i>
                        <span>å‡çº§èŠ‚ç‚¹</span>
                    </button>
                    <button class="action-btn" id="stake-btn">
                        <i>ğŸ”’</i>
                        <span>è´¨æŠ¼ä»£å¸</span>
                    </button>
                    <button class="action-btn" id="defend-btn">
                        <i>ğŸ›¡ï¸</i>
                        <span>é˜²å¾¡æ”»å‡»</span>
                    </button>
                    <button class="action-btn" id="connect-btn">
                        <i>ğŸŒ</i>
                        <span>è¿æ¥èŠ‚ç‚¹</span>
                    </button>
                </div>

                <div class="upgrades">
                    <div class="upgrades-header">
                        <h3>èŠ‚ç‚¹å‡çº§</h3>
                        <div class="balance">ä½™é¢: <span id="balance">100</span> NEX</div>
                    </div>

                    <div class="upgrade-item">
                        <div class="upgrade-info">
                            <div class="upgrade-name">GPU åŠ é€Ÿå™¨</div>
                            <div class="upgrade-desc">+5 GH/s ç®—åŠ›</div>
                        </div>
                        <div class="upgrade-cost">ğŸ’ 50 NEX</div>
                        <button class="upgrade-buy" id="upgrade-gpu">è´­ä¹°</button>
                    </div>

                    <div class="upgrade-item">
                        <div class="upgrade-info">
                            <div class="upgrade-name">å†·å´ç³»ç»Ÿ</div>
                            <div class="upgrade-desc">-10% èƒ½æºæ¶ˆè€—</div>
                        </div>
                        <div class="upgrade-cost">ğŸ’ 75 NEX</div>
                        <button class="upgrade-buy" id="upgrade-cooling">è´­ä¹°</button>
                    </div>

                    <div class="upgrade-item">
                        <div class="upgrade-info">
                            <div class="upgrade-name">å®‰å…¨åè®®</div>
                            <div class="upgrade-desc">+15% èŠ‚ç‚¹å¯é æ€§</div>
                        </div>
                        <div class="upgrade-cost">ğŸ’ 100 NEX</div>
                        <button class="upgrade-buy" id="upgrade-security">è´­ä¹°</button>
                    </div>
                </div>
            </div>

            <div class="network-view">
                <div class="network-header">
                    <h2 class="dashboard-title">
                        <i>ğŸŒ</i> åŒºå—é“¾ç½‘ç»œ
                    </h2>
                    <div class="nodes-count">èŠ‚ç‚¹: <span id="nodes-count">24</span></div>
                </div>

                <div class="network-canvas" id="network-canvas">
                    <!-- èŠ‚ç‚¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>

                <div class="events-log" id="events-log">
                    <div class="event success">[ç³»ç»Ÿ] æ¬¢è¿æ¥åˆ°Nexus Explorer! å¼€å§‹å»ºç«‹ä½ çš„åŒºå—é“¾èŠ‚ç‚¹ã€‚</div>
                    <div class="event">[ä¿¡æ¯] èŠ‚ç‚¹å·²å¯åŠ¨ï¼Œæ­£åœ¨åŒæ­¥åŒºå—é“¾æ•°æ®...</div>
                    <div class="event">[ä¿¡æ¯] å‘ç°12ä¸ªå¯è¿æ¥èŠ‚ç‚¹</div>
                </div>
            </div>
        </div>

        <div class="game-controls">
            <button class="control-btn" id="save-btn">ä¿å­˜æ¸¸æˆ</button>
            <button class="control-btn" id="reset-btn">é‡ç½®æ¸¸æˆ</button>
            <button class="control-btn" id="help-btn">æ¸¸æˆæŒ‡å—</button>
        </div>

        <footer>
            <p>Nexus Explorer - åŒºå—é“¾æ¨¡æ‹Ÿæ¸¸æˆ | å¼€æºé¡¹ç›®</p>
            <a href="https://github.com/DYmac/Nexus" class="github-link" target="_blank">
                <i>ğŸ“</i> GitHubä»“åº“
            </a>
        </footer>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            nexusTokens: 100,
            hashrate: 5.2,
            energyUsage: 120,
            reliability: 87,
            level: 1,
            gpuUpgrade: 0,
            coolingUpgrade: 0,
            securityUpgrade: 0,
            stakedTokens: 0
        };

        // DOMå…ƒç´ 
        const elements = {
            nexusTokens: document.getElementById('nexus-tokens'),
            hashrate: document.getElementById('hashrate'),
            energyUsage: document.getElementById('energy-usage'),
            reliability: document.getElementById('reliability'),
            level: document.getElementById('level'),
            balance: document.getElementById('balance'),
            nodesCount: document.getElementById('nodes-count'),
            eventsLog: document.getElementById('events-log'),
            networkCanvas: document.getElementById('network-canvas'),

            // æŒ‰é’®
            mineBtn: document.getElementById('mine-btn'),
            validateBtn: document.getElementById('validate-btn'),
            upgradeBtn: document.getElementById('upgrade-btn'),
            stakeBtn: document.getElementById('stake-btn'),
            defendBtn: document.getElementById('defend-btn'),
            connectBtn: document.getElementById('connect-btn'),

            // å‡çº§æŒ‰é’®
            upgradeGpu: document.getElementById('upgrade-gpu'),
            upgradeCooling: document.getElementById('upgrade-cooling'),
            upgradeSecurity: document.getElementById('upgrade-security')
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            updateUI();
            createNetworkNodes();
            setupEventListeners();

            // æ¸¸æˆå¾ªç¯
            setInterval(gameLoop, 2000);
        }

        // æ›´æ–°UI
        function updateUI() {
            elements.nexusTokens.textContent = gameState.nexusTokens.toFixed(2);
            elements.hashrate.textContent = gameState.hashrate.toFixed(1);
            elements.energyUsage.textContent = gameState.energyUsage;
            elements.reliability.textContent = `${gameState.reliability}%`;
            elements.level.textContent = gameState.level;
            elements.balance.textContent = gameState.nexusTokens.toFixed(0);

            // æ›´æ–°è¿›åº¦æ¡
            document.querySelector('.progress-bar').style.width = `${gameState.reliability}%`;
            document.querySelector('.progress-bar').style.background =
                gameState.reliability > 70 ? 'var(--success)' :
                gameState.reliability > 40 ? 'var(--warning)' : 'var(--danger)';
        }

        // åˆ›å»ºç½‘ç»œèŠ‚ç‚¹
        function createNetworkNodes() {
            elements.networkCanvas.innerHTML = '';

            // åˆ›å»ºç©å®¶èŠ‚ç‚¹
            const playerNode = document.createElement('div');
            playerNode.className = 'node player-node';
            playerNode.textContent = 'YOU';
            playerNode.style.left = '50%';
            playerNode.style.top = '50%';
            elements.networkCanvas.appendChild(playerNode);

            // åˆ›å»ºå…¶ä»–èŠ‚ç‚¹
            const nodeCount = 12 + Math.floor(gameState.level * 1.5);
            elements.nodesCount.textContent = nodeCount;

            for (let i = 0; i < nodeCount; i++) {
                const node = document.createElement('div');
                node.className = 'node other-node';
                node.textContent = i + 1;

                // éšæœºä½ç½® (é¿å…å¤ªé è¿‘ä¸­å¿ƒ)
                const angle = Math.random() * Math.PI * 2;
                const distance = 100 + Math.random() * 150;
                const centerX = elements.networkCanvas.offsetWidth / 2;
                const centerY = elements.networkCanvas.offsetHeight / 2;

                node.style.left = `${centerX + Math.cos(angle) * distance}px`;
                node.style.top = `${centerY + Math.sin(angle) * distance}px`;

                elements.networkCanvas.appendChild(node);

                // åˆ›å»ºè¿æ¥çº¿
                if (Math.random() > 0.3) {
                    const connection = document.createElement('div');
                    connection.className = 'connection';

                    const startX = centerX;
                    const startY = centerY;
                    const endX = parseFloat(node.style.left);
                    const endY = parseFloat(node.style.top);

                    const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
                    const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;

                    connection.style.width = `${length}px`;
                    connection.style.transform = `rotate(${angle}deg)`;
                    connection.style.left = `${startX}px`;
                    connection.style.top = `${startY}px`;

                    elements.networkCanvas.appendChild(connection);
                }
            }
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // æ“ä½œæŒ‰é’®
            elements.mineBtn.addEventListener('click', mine);
            elements.validateBtn.addEventListener('click', validateTransactions);
            elements.stakeBtn.addEventListener('click', stakeTokens);
            elements.defendBtn.addEventListener('click', defendNode);
            elements.connectBtn.addEventListener('click', connectToNetwork);

            // å‡çº§æŒ‰é’®
            elements.upgradeGpu.addEventListener('click', () => buyUpgrade('gpu'));
            elements.upgradeCooling.addEventListener('click', () => buyUpgrade('cooling'));
            elements.upgradeSecurity.addEventListener('click', () => buyUpgrade('security'));

            // æ§åˆ¶æŒ‰é’®
            document.getElementById('save-btn').addEventListener('click', saveGame);
            document.getElementById('reset-btn').addEventListener('click', resetGame);
            document.getElementById('help-btn').addEventListener('click', showHelp);
        }

        // æŒ–çŸ¿æ“ä½œ
        function mine() {
            const reward = (Math.random() * 0.5 + 0.5) * (gameState.hashrate / 10);
            gameState.nexusTokens += reward;

            // æ¶ˆè€—èƒ½æº
            gameState.energyUsage += 1;

            addEvent(`â›ï¸ æŒ–çŸ¿æˆåŠŸ! è·å¾— ${reward.toFixed(2)} NEX`, 'success');
            updateUI();
        }

        // éªŒè¯äº¤æ˜“
        function validateTransactions() {
            const reward = (Math.random() * 0.2 + 0.1) * (gameState.reliability / 20);
            gameState.nexusTokens += reward;

            addEvent(`âœ… å·²éªŒè¯äº¤æ˜“! è·å¾— ${reward.toFixed(2)} NEX`, 'success');
            updateUI();
        }

        // è´¨æŠ¼ä»£å¸
        function stakeTokens() {
            if (gameState.nexusTokens < 10) {
                addEvent('âŒ è´¨æŠ¼å¤±è´¥: ä»£å¸ä¸è¶³', 'danger');
                return;
            }

            const amount = Math.min(10, gameState.nexusTokens);
            gameState.nexusTokens -= amount;
            gameState.stakedTokens += amount;
            gameState.reliability = Math.min(100, gameState.reliability + 2);

            addEvent(`ğŸ”’ è´¨æŠ¼äº† ${amount.toFixed(2)} NEX! å¯é æ€§ +2%`, 'success');
            updateUI();
        }

        // é˜²å¾¡æ”»å‡»
        function defendNode() {
            const success = Math.random() < (gameState.reliability / 100);

            if (success) {
                const reward = Math.random() * 5 + 5;
                gameState.nexusTokens += reward;
                gameState.reliability = Math.min(100, gameState.reliability + 1);

                addEvent(`ğŸ›¡ï¸ æˆåŠŸæŠµå¾¡é»‘å®¢æ”»å‡»! è·å¾— ${reward.toFixed(2)} NEX`, 'success');
            } else {
                const penalty = Math.random() * 10 + 5;
                gameState.nexusTokens = Math.max(0, gameState.nexusTokens - penalty);
                gameState.reliability = Math.max(0, gameState.reliability - 5);

                addEvent(`ğŸ’¥ é»‘å®¢æ”»å‡»æˆåŠŸ! æŸå¤± ${penalty.toFixed(2)} NEX`, 'danger');
            }

            updateUI();
        }

        // è¿æ¥åˆ°ç½‘ç»œ
        function connectToNetwork() {
            const reward = (Math.random() * 0.8 + 0.2) * (gameState.level / 2);
            gameState.nexusTokens += reward;
            gameState.level += 0.1;

            addEvent(`ğŸŒ è¿æ¥åˆ°æ–°èŠ‚ç‚¹! è·å¾— ${reward.toFixed(2)} NEX`, 'success');
            updateUI();
            createNetworkNodes();
        }

        // è´­ä¹°å‡çº§
        function buyUpgrade(type) {
            let cost, effect;

            switch(type) {
                case 'gpu':
                    cost = 50;
                    effect = 'ç®—åŠ› +5 GH/s';
                    break;
                case 'cooling':
                    cost = 75;
                    effect = 'èƒ½æºæ¶ˆè€— -10%';
                    break;
                case 'security':
                    cost = 100;
                    effect = 'å¯é æ€§ +15%';
                    break;
            }

            if (gameState.nexusTokens < cost) {
                addEvent(`âŒ å‡çº§å¤±è´¥: éœ€è¦ ${cost} NEX`, 'danger');
                return;
            }

            gameState.nexusTokens -= cost;

            switch(type) {
                case 'gpu':
                    gameState.hashrate += 5;
                    gameState.gpuUpgrade++;
                    break;
                case 'cooling':
                    gameState.energyUsage = Math.max(50, gameState.energyUsage * 0.9);
                    gameState.coolingUpgrade++;
                    break;
                case 'security':
                    gameState.reliability = Math.min(100, gameState.reliability + 15);
                    gameState.securityUpgrade++;
                    break;
            }

            gameState.level += 0.5;
            addEvent(`â¬†ï¸ å‡çº§æˆåŠŸ! ${effect}`, 'success');
            updateUI();
        }

        // æ·»åŠ äº‹ä»¶æ—¥å¿—
        function addEvent(message, type = '') {
            const eventElement = document.createElement('div');
            eventElement.className = `event ${type}`;
            eventElement.textContent = `[${getFormattedTime()}] ${message}`;

            elements.eventsLog.prepend(eventElement);

            // é™åˆ¶æ—¥å¿—æ•°é‡
            if (elements.eventsLog.children.length > 20) {
                elements.eventsLog.removeChild(elements.eventsLog.lastChild);
            }
        }

        // è·å–æ ¼å¼åŒ–æ—¶é—´
        function getFormattedTime() {
            const now = new Date();
            return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
        }

        // æ¸¸æˆå¾ªç¯
        function gameLoop() {
            // è¢«åŠ¨æ”¶å…¥ (è´¨æŠ¼å¥–åŠ±)
            if (gameState.stakedTokens > 0) {
                const reward = gameState.stakedTokens * 0.005;
                gameState.nexusTokens += reward;
                addEvent(`ğŸ’° è´¨æŠ¼å¥–åŠ±: +${reward.toFixed(4)} NEX`, 'success');
            }

            // éšæœºäº‹ä»¶
            if (Math.random() < 0.2) {
                const events = [
                    {
                        message: "ğŸ“ˆ åŠ å¯†è´§å¸å¸‚åœºä¸Šæ¶¨! æ‰€æœ‰å¥–åŠ±ç¿»å€ (æŒç»­30ç§’)",
                        effect: () => {
                            // ä¸´æ—¶æ•ˆæœ
                            setTimeout(() => {
                                addEvent("ğŸ“‰ å¸‚åœºæ¢å¤æ­£å¸¸æ°´å¹³", "warning");
                            }, 30000);
                        }
                    },
                    {
                        message: "âš ï¸ ç½‘ç»œæ‹¥å µ! äº¤æ˜“è´¹ç”¨å¢åŠ ",
                        effect: () => gameState.energyUsage += 5
                    },
                    {
                        message: "ğŸ‰ ç¤¾åŒºç©ºæŠ•! è·å¾—å…è´¹ä»£å¸",
                        effect: () => gameState.nexusTokens += Math.random() * 20 + 10
                    }
                ];

                const event = events[Math.floor(Math.random() * events.length)];
                addEvent(event.message, 'warning');
                if (event.effect) event.effect();
            }

            // éšæœºæ”»å‡»
            if (Math.random() < 0.15) {
                addEvent("ğŸš¨ æ£€æµ‹åˆ°é»‘å®¢æ”»å‡»å°è¯•!", "danger");
            }

            updateUI();
        }

        // ä¿å­˜æ¸¸æˆ
        function saveGame() {
            localStorage.setItem('nexusExplorerSave', JSON.stringify(gameState));
            addEvent("ğŸ’¾ æ¸¸æˆå·²ä¿å­˜!", "success");
        }

        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            if (confirm('ç¡®å®šè¦é‡ç½®æ¸¸æˆå—ï¼Ÿæ‰€æœ‰è¿›åº¦å°†ä¸¢å¤±ã€‚')) {
                localStorage.removeItem('nexusExplorerSave');
                Object.assign(gameState, {
                    nexusTokens: 100,
                    hashrate: 5.2,
                    energyUsage: 120,
                    reliability: 87,
                    level: 1,
                    gpuUpgrade: 0,
                    coolingUpgrade: 0,
                    securityUpgrade: 0,
                    stakedTokens: 0
                });

                elements.eventsLog.innerHTML = `
                    <div class="event success">[ç³»ç»Ÿ] æ¸¸æˆå·²é‡ç½®! å¼€å§‹æ–°çš„æ—…ç¨‹ã€‚</div>
                    <div class="event">[ä¿¡æ¯] èŠ‚ç‚¹å·²é‡æ–°å¯åŠ¨...</div>
                `;

                updateUI();
                createNetworkNodes();
            }
        }

        // æ˜¾ç¤ºå¸®åŠ©
        function showHelp() {
            alert(`
Nexus Explorer æ¸¸æˆæŒ‡å—ï¼š
Nexus Explorer Game Guide:

ç›®æ ‡ï¼šå»ºç«‹å¼ºå¤§çš„åŒºå—é“¾èŠ‚ç‚¹ï¼Œèµšå–ä»£å¸ï¼Œæå‡ç½‘ç»œå½±å“åŠ›ã€‚
Goal: Build a powerful blockchain node, earn tokens, and increase network influence.

æ ¸å¿ƒæœºåˆ¶ï¼š
1. æŒ–çŸ¿ (â›ï¸) - æ¶ˆè€—èƒ½æºè·å¾—ä»£å¸
2. éªŒè¯äº¤æ˜“ (âœ…) - ä½é£é™©è·å¾—ä»£å¸
3. è´¨æŠ¼ä»£å¸ (ğŸ”’) - æé«˜èŠ‚ç‚¹å¯é æ€§
4. é˜²å¾¡æ”»å‡» (ğŸ›¡ï¸) - ä¿æŠ¤èŠ‚ç‚¹å®‰å…¨
5. è¿æ¥èŠ‚ç‚¹ (ğŸŒ) - æ‰©å±•ç½‘ç»œå¹¶æå‡ç­‰çº§
Core Mechanics:
1. Mining (â›ï¸) - Consume energy to get tokens
2. Verify transactions (âœ…) - Get tokens with low risk
3. Stake tokens (ğŸ”’) - Improve node reliability
4. Defend against attacks (ğŸ›¡ï¸) - Protect node security
5. Connect nodes (ğŸŒ) - Expand the network and upgrade levels

å‡çº§èŠ‚ç‚¹ï¼š
- GPUåŠ é€Ÿå™¨ï¼šæå‡ç®—åŠ›
- å†·å´ç³»ç»Ÿï¼šé™ä½èƒ½æºæ¶ˆè€—
- å®‰å…¨åè®®ï¼šæé«˜å¯é æ€§
Upgrade nodes:
- GPU accelerator: Increase computing power
- Cooling system: Reduce energy consumption
- Security protocol: Improve reliability

æç¤ºï¼š
- ç»å¸¸ä¿å­˜æ¸¸æˆè¿›åº¦
- ä¿æŒé«˜å¯é æ€§ä»¥é¿å…æ”»å‡»
- è´¨æŠ¼ä»£å¸å¯è·å¾—è¢«åŠ¨æ”¶å…¥
Tips:
- Save game progress frequently
- Maintain high reliability to avoid attacks
- Stake tokens for passive income
            `);
        }

        // åŠ è½½ä¿å­˜çš„æ¸¸æˆ
        function loadSavedGame() {
            const savedGame = localStorage.getItem('nexusExplorerSave');
            if (savedGame) {
                try {
                    const savedState = JSON.parse(savedGame);
                    Object.assign(gameState, savedState);
                    addEvent("[ç³»ç»Ÿ] æ¸¸æˆè¿›åº¦å·²åŠ è½½!", "success");
                } catch (e) {
                    console.error("åŠ è½½æ¸¸æˆå¤±è´¥:", e);
                    addEvent("[ç³»ç»Ÿ] åŠ è½½æ¸¸æˆå¤±è´¥ï¼Œå¼€å§‹æ–°æ¸¸æˆ", "warning");
                }
            }
        }

        // å¯åŠ¨æ¸¸æˆ
        window.addEventListener('load', () => {
            loadSavedGame();
            initGame();
        });
    </script>
</body>
</html>